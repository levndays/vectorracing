<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vector Racer Pro - Modular</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Vector Racer Pro</h1>
    </header>

    <main>
        <div class="top-panel">
            <div class="mode-switcher">
                <button id="switchToGameModeButton" class="mode-button game-button active-mode" aria-pressed="true">Play</button>
                <button id="switchToEditorModeButton" class="mode-button game-button" aria-pressed="false">Track Editor</button>
            </div>
            <div class="player-management">
                <span id="playerCountLabel">Players: <span id="playerCount">2</span></span>
                <button id="addPlayerButton" class="game-button" title="Add Player" aria-describedby="playerCountLabel">+</button>
                <button id="removePlayerButton" class="game-button" title="Remove Player" aria-describedby="playerCountLabel">-</button>
            </div>
            <div class="track-size-management">
                <label for="trackWidthInput">Width:</label>
                <input type="number" id="trackWidthInput" value="30" min="10" max="100">
                <label for="trackHeightInput">Height:</label>
                <input type="number" id="trackHeightInput" value="20" min="10" max="60">
                <button id="applyTrackSizeButton" class="game-button">Apply Size</button>
            </div>
            <div class="map-selection">
                <label for="mapSelector">Map:</label>
                <select id="mapSelector"></select>
            </div>
        </div>

        <div class="game-container">
            <canvas id="gameCanvas">
                Your browser does not support the HTML5 canvas element. Game graphics cannot be displayed.
            </canvas>

            <div id="gameControls" class="controls-panel">
                <h2>Game Mode</h2>
                <div class="player-info">
                    Current Player: <span id="currentPlayerName"></span>
                    <span id="currentPlayerColorIndicator" class="color-indicator"></span>
                </div>
                <div class="speed-display">
                    <p>Speed: (X: <span id="currentSpeedX">0</span>, Y: <span id="currentSpeedY">0</span>)</p>
                    <canvas id="speedVectorCanvas" width="100" height="100"></canvas>
                </div>
                <p class="control-label">Acceleration:</p>
                <div class="acceleration-grid">
                    <button class="game-button" data-ddx="-1" data-ddy="-1" title="Accelerate Up-Left">‚Üñ</button>
                    <button class="game-button" data-ddx="0"  data-ddy="-1" title="Accelerate Up">‚Üë</button>
                    <button class="game-button" data-ddx="1"  data-ddy="-1" title="Accelerate Up-Right">‚Üó</button>
                    <button class="game-button" data-ddx="-1" data-ddy="0" title="Accelerate Left">‚Üê</button>
                    <button class="game-button" data-ddx="0"  data-ddy="0" title="No Change (Coast)">‚óé</button>
                    <button class="game-button" data-ddx="1"  data-ddy="0" title="Accelerate Right">‚Üí</button>
                    <button class="game-button" data-ddx="-1" data-ddy="1" title="Accelerate Down-Left">‚Üô</button>
                    <button class="game-button" data-ddx="0"  data-ddy="1" title="Accelerate Down">‚Üì</button>
                    <button class="game-button" data-ddx="1"  data-ddy="1" title="Accelerate Down-Right">‚Üò</button>
                </div>
                
                <div id="targetingInfoPanel" class="targeting-info-panel" style="display: none;">
                    <!-- Content will be set by JS -->
                </div>
                <div id="abilityButtonsContainer" class="ability-buttons-container" style="display: none;">
                    <!-- Buttons will be added by JS -->
                </div>

                <button id="hintButton" class="action-button game-button">Hint (<span id="hintsRemaining">3</span>)</button>
                <button id="resetGameButton" class="action-button game-button">Restart Game</button>
            </div>

            <div id="editorControls" class="controls-panel" style="display: none;">
                <h2>Track Editor</h2>
                <p class="control-label">Select Tile Type:</p>
                <div class="tile-selector">
                    <button class="tile-button game-button" data-tile-type="EMPTY" title="Empty (E)" aria-pressed="false">‚¨ú</button>
                    <button class="tile-button game-button active-tile" data-tile-type="WALL" title="Wall (W)" aria-pressed="true">‚¨õ</button>
                    <button class="tile-button game-button" data-tile-type="START" title="Start (S)" aria-pressed="false">üü©</button>
                    <button class="tile-button game-button" data-tile-type="FINISH" title="Finish (F)" aria-pressed="false">üü®</button>
                </div>
                <p class="small-text">Click on grid to place. Shift+Click to erase.</p>
                <p class="small-text">Hotkeys: E, W, S, F.</p>
                <button id="applyTrackAndPlayButton" class="action-button primary game-button">Apply & Play</button>
                <button id="resetTrackToDefaultButton" class="action-button game-button">Reset to Default</button>
                <button id="clearTrackButton" class="action-button game-button">Clear Track</button>
            </div>
        </div>
    </main>

    <div id="message" class="message-overlay" style="display: none;">
        <!-- Content for game messages and leaderboard will be injected by JavaScript -->
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>